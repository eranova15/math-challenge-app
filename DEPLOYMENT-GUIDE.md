# üöÄ The Hypothetical Game - Railway Deployment Guide\n\n## Quick Deploy Checklist\n\n### 1. **Railway Setup** (5 minutes)\n1. Go to [railway.app](https://railway.app) and sign up with GitHub\n2. Click **\"New Project\"** ‚Üí **\"Deploy from GitHub repo\"** \n3. Select your `math-challenge-app` repository\n4. Railway auto-detects Node.js and uses `npm start`\n\n### 2. **Add Redis Database** (2 minutes)\n1. In Railway dashboard ‚Üí **\"+ New Service\"**\n2. Select **\"Database\"** ‚Üí **\"Redis\"**\n3. Railway automatically connects it (sets `REDIS_URL`)\n\n### 3. **Configure Environment Variables** (3 minutes)\nIn Railway ‚Üí Your Project ‚Üí Variables tab, add:\n\n```env\n# Required for premium features\nNODE_ENV=production\nCLIENT_URL=https://your-railway-url.up.railway.app\n\n# Stripe Configuration (get from stripe.com dashboard)\nSTRIPE_SECRET_KEY=sk_live_your_secret_key\nSTRIPE_PUBLISHABLE_KEY=pk_live_your_publishable_key\nSTRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret\n\n# Stripe Price IDs (create in Stripe dashboard)\nSTRIPE_BASIC_PRICE_ID=price_your_basic_plan_id\nSTRIPE_PREMIUM_PRICE_ID=price_your_premium_plan_id\n\n# Feature toggles\nENABLE_SUBSCRIPTIONS=true\nENABLE_MULTIPLAYER=true\nENABLE_ANALYTICS=true\n```\n\n### 4. **Configure Custom Domain** (10 minutes)\n1. Railway dashboard ‚Üí Settings ‚Üí Domains\n2. Add custom domain: `thehypotheticalgame.com`\n3. Railway provides DNS settings\n4. Update your domain DNS records:\n   ```\n   Type: CNAME\n   Name: @ (or www)\n   Value: your-app.up.railway.app\n   ```\n\n### 5. **Set Up Stripe** (15 minutes)\n1. Go to [stripe.com](https://stripe.com) ‚Üí Create account\n2. **Create Products:**\n   - Basic Plan: $12/month recurring\n   - Premium Plan: $25/month recurring\n3. **Copy Price IDs** to Railway environment variables\n4. **Set up webhook** endpoint: `https://thehypotheticalgame.com/api/stripe/webhook`\n5. **Copy webhook secret** to Railway environment variables\n\n## üí∞ Revenue Setup\n\n### Stripe Dashboard Configuration\n1. **Products & Pricing:**\n   ```\n   Basic Plan:\n   - Name: \"Basic Plan\" \n   - Price: $12.00 USD/month\n   - Recurring: Monthly\n   \n   Premium Plan:\n   - Name: \"Premium Family Plan\"\n   - Price: $25.00 USD/month \n   - Recurring: Monthly\n   ```\n\n2. **Webhook Events** (subscribe to):\n   - `checkout.session.completed`\n   - `customer.subscription.updated`\n   - `customer.subscription.deleted`\n\n3. **Test vs Live Mode:**\n   - Start with test keys for development\n   - Switch to live keys when ready for real payments\n\n## üß™ Testing Your Deployment\n\n### 1. **Basic Functionality**\n- [ ] Site loads at your Railway URL\n- [ ] User registration works\n- [ ] Free games work (5 game limit)\n- [ ] Upgrade modal shows after 5 games\n\n### 2. **Premium Features**\n- [ ] Subscription modal loads\n- [ ] Stripe checkout opens (test mode)\n- [ ] Payment success page works  \n- [ ] Premium features unlock after payment\n\n### 3. **Multiplayer**\n- [ ] Online rooms create successfully\n- [ ] Players can join rooms\n- [ ] Real-time gameplay works\n\n## üìä Analytics & Monitoring\n\n### Built-in Analytics\n- User registrations\n- Game sessions completed\n- Subscription conversions\n- Error tracking\n\n### Railway Monitoring\n- View logs: Railway dashboard ‚Üí Deployments ‚Üí View Logs\n- Monitor performance: Railway provides CPU/Memory metrics\n- Health checks: `/health` endpoint\n\n## üîß Post-Launch Optimizations\n\n### 1. **Performance**\n- Enable Railway's auto-scaling\n- Monitor Redis memory usage\n- Optimize database queries\n\n### 2. **Marketing Integration**\n- Add Google Analytics tracking\n- Set up social media sharing\n- Configure email notifications\n\n### 3. **Revenue Optimization**\n- A/B test pricing\n- Add yearly subscription discounts\n- Implement referral system\n\n## üö® Troubleshooting\n\n### Common Issues\n\n**\"Server failed to start\"**\n- Check Railway logs for specific error\n- Verify all environment variables are set\n- Ensure Redis database is connected\n\n**\"Stripe webhook failed\"**\n- Verify webhook URL is correct\n- Check webhook secret matches\n- Ensure endpoint is publicly accessible\n\n**\"Premium features not unlocking\"**\n- Check Stripe webhook is receiving events\n- Verify user email matches in database\n- Check subscription status in Stripe dashboard\n\n### Debug Commands\nTest your deployment:\n```bash\n# Health check\ncurl https://thehypotheticalgame.com/health\n\n# API status\ncurl https://thehypotheticalgame.com/api/status\n\n# Subscription plans\ncurl https://thehypotheticalgame.com/api/subscription/plans\n```\n\n## üìà Scaling Strategy\n\n### User Growth Milestones\n- **0-100 users**: Single Railway instance sufficient\n- **100-1,000 users**: Add Redis replica for backup\n- **1,000+ users**: Consider Redis cluster, multiple app instances\n- **10,000+ users**: Implement CDN, database sharding\n\n### Revenue Milestones  \n- **$1,000/month**: 40 paid subscribers\n- **$10,000/month**: 400 paid subscribers\n- **$50,000/month**: 2,000 paid subscribers\n\n## üéØ Success Metrics\n\nTrack these KPIs:\n- **Conversion Rate**: Free ‚Üí Paid subscribers\n- **Monthly Recurring Revenue (MRR)**\n- **Customer Acquisition Cost (CAC)**\n- **Lifetime Value (LTV)**\n- **Churn Rate**: Monthly subscription cancellations\n\n---\n\n## üöÄ Ready to Launch?\n\n1. **Deploy to Railway** ‚úÖ\n2. **Add Redis database** ‚úÖ \n3. **Configure Stripe** ‚è≥\n4. **Set up custom domain** ‚è≥\n5. **Test premium features** ‚è≥\n6. **Go live!** üéâ\n\nYour premium math learning platform is ready to generate **real revenue**! \n\n**Next:** Start marketing to reach your first 100 users and convert them to paid subscribers.\n\n---\n*Made with ‚ù§Ô∏è for your success*"